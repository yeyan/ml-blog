{{ $paginator := .Paginator }}

{{ $range := 2 }}
{{ $current := $paginator.PageNumber }}

{{ $upper := add $current $range }}
{{ $upper := cond (ge $upper $paginator.TotalPages) $paginator.TotalPages  $upper }}

{{ $lower := sub $current $range }}
{{ $lower := cond (le $lower 1) 1 $lower }}

{{ $rpad := sub $range (sub $current $lower) }}
{{ $lpad := sub $range (sub $upper $current) }}

{{ $lower := sub $lower $lpad }}
{{ $upper := add $upper $rpad }}

{{ $lower := cond (le $lower 1) 1 $lower }}
{{ $upper := cond (ge $upper $paginator.TotalPages) $paginator.TotalPages  $upper }}

{{ if gt $paginator.TotalPages 1 }}

<div class="center">
    <div class="pure-button-group">
        {{ if ne $paginator.PageNumber 1 }}
        <a href="{{ $paginator.First.URL }}" class="pure-button">
            <i class="fas fa-angle-double-left"></i>
        </a>
        {{ end }}
        {{ if $paginator.HasPrev }}
        <a href="{{ $paginator.Prev.URL }}" class="pure-button">
            <i class="fas fa-angle-left"></i>
        </a>
        {{ end }}
        {{ range $paginator.Pagers }}
        {{ if and (ge .PageNumber $lower) (le .PageNumber $upper)}}
        {{ $active := eq . $paginator }}
        <a href="{{ .URL  }}" class="pure-button {{ if $active }} pure-button-active {{ end }}"> {{ .PageNumber }}</a>
        {{ else if or (eq .PageNumber (add $upper 1)) (eq .PageNumber (sub $lower 1)) }}
        <a class="pure-button pure-button-disabled"><i class="fas fa-ellipsis-h"></i></a>
        {{ end }}
        {{ end }}
        {{ if $paginator.HasNext }}
        <a href="{{ $paginator.Next.URL }}" class="pure-button">
            <i class="fas fa-angle-right"></i>
        </a>
        {{ end }}
        {{ if ne $paginator.PageNumber $paginator.TotalPages }}
        <a href="{{ $paginator.Last.URL }}" class="pure-button">
            <i class="fas fa-angle-double-right"></i>
        </a>
        {{ end }}
    </div>
</div>
{{ end }}
